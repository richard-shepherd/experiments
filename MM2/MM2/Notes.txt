TODO
----
- Handle client connection failure, eg if gateway is not running

- Think about use of std::string. We want to encode strings as UTF-8

- Add getField() methods to Message

- Replace enum with enum class

- Handle fast producers and slow consumers


Handling post-connect messages in ServiceManager
------------------------------------------------
- We want all post-connect messages to be handled by the service-manager (SM)

- This includes subscriptions and sent messages

- They *are* all handled by the SM
  - Because it has taken over the socket callback
  - BUT: They are not all happening on the SM UV loop
  - SO: They are not all happening on the SM thread

- IDEA: Can we check the loop and marshall them?







